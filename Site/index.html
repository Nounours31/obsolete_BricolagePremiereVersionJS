<html lang="fr">

<head>
  <meta charset="utf-8" />
  <!--
      La balise <meta> autorise d'autres valeurs utilisables dans vos projets :
        width
          largeur de fenêtre viewport (par exemple width="device-width")
        height
          hauteur de fenêtre viewport (par exemple height="device-height")
        initial-scale
          niveau de zoom initial (par exemple initial-scale="1.0")
        minimum-scale
          niveau de zoom minimal (par exemple minimum-scale="0.5")
        maximum-scale
          niveau de zoom maximal (par exemple maximum-scale="3.0"). Attention, la valeur "1.0" interdit le zoom et peut rendre vos pages inaccessibles
        user-scalable
          possibilité à l'utilisateur de zoomer (par exemple user-scalable="yes"). Attention, la valeur "no" interdit le zoom et peut rendre vos pages inaccessibles
    -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, shrink-to-fit=no" />
  <link rel="icon" type="image/png" href="./Images/BRILogo.png" />
  <title>Check browser first ... </title>
</head>

<body id="StartBody">
  hello !
  <script>
    function isES6Compatible (iInfo) {
      var retour = false;
      var nom = iInfo.browser.toLowerCase();
      switch (nom) {
        case "trident": /* ie */ retour = false; break;
        case "firefox": if (iInfo.version > 45) retour = true; break;
        case "edge": if (iInfo.version > 13) retour = true; break;
        case "opera": if (iInfo.version > 36) retour = true; break;
        case "chrome": if (iInfo.version > 49) retour = true; break;
        default: retour = false;
      }
      return retour;
    }

    function browserInfo() {
      var retour = { "browser" :  navigator.appName, "version" : 0 };
      var isFind = false;
      var ua = navigator.userAgent; 
      /* chrome:  Mozilla/5.0 (Windows NT 6.1; Win64; x64)          AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36  */
      /* opera:   Mozilla/5.0 (Windows NT 6.1; Win64; x64)          AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36  OPR/60.0.3255.170 */
      /* edge:    Mozilla/5.0 (Windows NT 10.0; Win64; x64)         AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36  Edge/16.16299*/
      /* firefox: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101                         Firefox/60.0 */
      /* ie:      Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/7.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E) */


      var regexp = /(opr|edge)\/([\d]+)/i;
      var M = ua.match(regexp);

      /* Je suis un edge ou un opera */
      if ((M != null) && (M.length > 0)) {
        retour.browser=M[1];
        retour.version=parseInt (M[2]);
        isFind = true;
      }


      if (!isFind) {
        regexp = /(firefox|chrome)\/([\d]+)/i;
        M = ua.match(regexp);
        /* Je suis un firefox ou un chrome */
        if ((M != null) && (M.length > 0)) {
          retour.browser=M[1];
          retour.version=parseInt (M[2]);
          isFind = true;
        }
      }


      if (!isFind) {
        regexp = /(trident)\/([\d]+)/i;
        M = ua.match(regexp);
        /* Je suis un ie */
        if ((M != null) && (M.length > 0)) {
          retour.browser=M[1];
          retour.version=parseInt (M[2]);
          isFind = true;
        }
      }
      return retour;
    } 

    var iInfo = browserInfo();
    console.log (iInfo);
    if (!isES6Compatible(iInfo)) {
      var body = document.getElementById ("StartBody");
      var msg = "Votre browser est incompatible avec cette version du site - merci de prendre une version plus recente.";
      msg = msg + "<br/>Browser: " + iInfo.browser + "   Version: " + iInfo.version;
      msg = "<h1>"+msg+"</h1>";
      body.innerHTML = msg;
    }
    else {
      document.location = './html/site.html';
    }
  </script>
</body>
</html>